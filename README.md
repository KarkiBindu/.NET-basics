# .NET-basics

1. <b> Assembly </b> :
    - An assembly is a collection of types and resources that are built to work together and form a logical unit of functionality.<sup>1</sup> 
    - It contains the manifest and Intermediate language (IL)
    - It mainly in the form of <i> .exe or .dll </i>
    - Windows and Console apps are in the form of .exe, Class Library and Web app are in the form of .dll
    - It consists of four parts : </br> 1. Simple textual name (project name mostly) </br> 2. Version Number </br> 3. Culture Information </br> 4. Public key token
    - An assembly can either be strongly named or weakly named
    - Assembly with public key token are strongly named
    - <b>Version Number </b> signifies the version of an assembly; by default version number is 1.0.0.0
    - Version Number consists of four parts : </br> 1. Major version </br> 2. Minor version </br> 3. Build number </br> 4. Revision number
    - Culture information determines whether the assembly is language(English/ Spanish) neutral or not and when culture is defined the assembly will be satellite assembly
    - These information can be changed/updated from <i>AssemblyInfo.cs file</i>
    
2. <b> Manifest </b> : 
    - It contains the assembly metadata that specifies the assembly's version number, requirements and security identity
    - These metadata also helps define all scope of the assembly and resolve references to resorces and classes
    
3. <b> Intermediate Language (IL) </b> :
    - All the code in an assembly are coverted into an assembly language or platform independent set of instruction known as intermediate language
    - It is a generated by language specific compiler
    - This is how IL looks like : </br>
    ![Intermediate Language](https://github.com/KarkiBindu/.NET-basics/blob/master/IL.JPG)

3. <b> Common Language Runtime (CLR) </b> :
    - It is the foundation of .net framework and acts as its execution engine
    - It manages the execution of programs and provides suitable environment for programs to run
    - It is a kind of compiler and supports multiple programming languages
    
4. <b> Working principle </b> :
    1. A language native compiler (csc.exe for MS C#) converts all the code written in specific language into an assembly
    2. Assembly has the CIL (Common Intermediate Language) which is passed to JIT (Just In Time) compiler of CLR
    3. JIT converts CIL to machine language code ate run time, JIT only converts the code required for execution
    4. Finally the CPU (Central Processing Unit) executes the code directly
    
5. <b> ILDASM (IL Disassembler) </b> :
    - It is a visual studio commandline tool
    - It is used to peek at the assembly manifest and IL
    - It can also be used to export manifest and IL into text file
    - To disammble an assembly open visual studio command prompt and enter `ILDASM fullassemblypath`
    - Then following window will be shown :
    ![Disassembled Assembly](https://github.com/KarkiBindu/.NET-basics/blob/master/ILDASM.png)
    - To create text file Go to File-> Dump and click ok and provide the filename, these files are saved with <i>.il</i> extension
    
6. <b> ILASM (IL Assembler) </b> :
    - It is a visual studio commandline tool
    - It is used to reconstruct an assembly from a text file that contains manifest and IL
    - To create assembly from <i> .il </i> file; open visual studio command prompt and enter `ILASM full.ilFilepath`
   
7. <b> Strong Naming an Assembly </b> :
    - Assemblies signed with private and public key pair are  strong named
    - They are supposed to be unique and solves DLL hell
    - To install an assembly into GAC they must be strongly named
    - To create key pair open visal studio command prompt and enter `sn.exe -k Generationpath\Filename.snk`, -k asserts generation
    - To make an assembly Strongly Named in <i>AssemblyIno.cs</i> use <i>AssemblyKeyFile</i> attribute `[assembly : AssemblyKeyFile("Generationpath\Filename.snk")]` 
    
8. <b> Global Assembly Cache (GAC) </b> :
    - It is a location where all .net framework class library are installed
    - It is found in Assembly folder inside OS directory in windows OS it is found in C:\Windows\Assembly
    - Assemblies installed in GAC can be shared by multiple applications without referencing (copying locally) it
    - Only add assembly to GAC if it is shared by other applications
    - These assemblies will not be copied when trying to copy the project to another machine
    - There are two GAC location : </br> 1. C:\Windows\assembly for .NET2.0-3.5 </br> 2. C:\Windows\Microsoft.NET\assembly for .NET 4 and above
    - Assembly can be installed in GAC in two ways: </br> 1. Drag and drop </br> 2. Use GacUtil.exe (GAC utility tool)
    - Assemblies with same name and same public keytoken can be together and perform together with different version number
    - To install using GAC open VS command prompt and navigate to assembly location and enter `gacutil -i fullassemblypathname`
    - To uninstall using GAC eneter `gacutil -u AssemblyName`, no extension required
    - To uninstall specific assembly using GAC `gacutil -u AssemblyName,version = versionnmber,publickeytoken = value`

9. <b> DLL Hell </b> :
    - If an application installs new vwesion of shared component that is not backward compatible with the version already available on the machine then it will break all the applications that relies in it which is known as dll hell.
    - Example: We have one application A1 sharing assembly of another application A2. If methods and its signature is changed in A2 and provided to the A1 application, A1 will not be able to find that method as the signatuure is A1 is of the unchanged method which will crash the application.
    - To reolve this problem an assembly should be strongly named. So that the versions of the assemblies will be created preventing the applicatio to crash. If the method is not found in newer version then it will check the older version. 

10. <b> How .NET finds shared assembly </b> :
    - The manifest contains the information about the dependent assemblies
    - If the dependent assembly is strongly named then the CLR checks in GAC
    - If it is not found in GAC then it checks for the location in .config file if it exists
    - Else it searches in the directory containing the executable files or assemblies (debug/release)
    - If the assembly is not found then the application terminates with error

11. <b> Components of .NET Framework </b> :
     1) CLR: It provides the runtime environment for managed code and allocates and deallocates the memory within scope
     2) Class Library: These are also called base class library which contains the methods and functions independent to the language. Most of these are accesible under System. or Microsoft. namespace.
     3) Common type Specification (CTS): 
        - Every programming language has its own data type system, so CTS is responsible for understanding all the data type systems of .NET programming languages and converting them into CLR understandable format which will be a common format.
        - There are 2 Types of CTS that every .NET programming language have :
            1.	Value Types: Value Types will store the value directly into the memory location. These types work with stack mechanism only. CLR allows memory for these at Compile Time.
            2.	Reference Types: Reference Types will contain a memory address of value because the reference types wonâ€™t store the variable value directly in memory. These types work with a Heap mechanism. CLR allocates memory for these at Runtime.                  
     4) Common Language Specification (CLS): 
        - It is a part of specification of .Net framework and sub-set of CTS
        - It conatins fundamental sets of language feature supported by CLR
        - It includes feature common to many OOP language
        - It defines the rules for the compiler to support interoperability and interaction between languages supported by CLS
        - Language Interoperability can be achieved in two ways :
            1.	Managed Code: The MSIL code which is managed by the CLR is known as the Managed Code. For managed code CLR provides three .NET facilities:
                              o	CAS(Code Access Security)
                              o	Exception Handling
                              o	Automatic Memory Management
            2.	Unmanaged Code: Before .NET development the programming language like .COM Components & Win32 API do not generate the MSIL code. So these are not managed by CLR rather they are managed by the Operating System.

     
     
12. <b> Components of CLR </b> :    
    - Class Loader: </br>
            - Loads classes reqired for execution at the time from compiled source code to memory</br>
            - Cannot allocate or deallocate memory </br>
    - Memory Manager:</br>
            - Allocates memory for all objects in application's heap
    - Garbage Collector (GC):</br>
            - Cleans unused managed objects and reclaims memory </br>
            - Runs as a background thread and checks for unused memory after uncertain period of time </br>
            - It cannot cleans memory outside of .NET boundary like excel files etc </br>
            - It contains different generations like Gen 0, gen 1, gen 2 </br>
            - Generations are memory allocated buckets, when the program is first run then the objects are allocated in gen 0, then garbage collector checks after some time for unused objects and removes them if the objects are required then it moves those to gen 1 and again after certain time garbage collector checks for nused objects and removes them and transfers the reqired objects to gen 2. </br>
            - Generations helps for faster performance of GC </br>
            - Gen 1 and gen 2 is least frequented by GC, means the objects of gen 1 and gen 2 stays in memory forlong time </br>
            - These processes can be studied by installing CLR provider </br>
     - JIT Compiler:</br>
            - Compiles the Intermediate language into machine code
     - Exception Manager:</br>
            - Creates exception log and raises notification on runtime error 
     - Thread Manager:</br>
            - Helps to create and execute threads for multi-processing
     - Security Manager:</br>
            - Verifies every steps before execution
            
<b>References</b> :
1. "Assemblies In .NET". Docs.Microsoft.Com, 08/15/2019, https://docs.microsoft.com/en-us/dotnet/standard/assembly/.

<b>Resources</b> :
1. https://www.youtube.com/watch?v=ruf4U9_Rbss&list=PL8598C97BA1D871C1
